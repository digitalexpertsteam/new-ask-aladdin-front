import { __decorate } from "tslib";
import { Injectable } from '@angular/core';
import { CarouselComponent } from './carousel.component';
import { Overlay } from './overlay/overlay.service';
import { EventService as OverlayEventService } from './overlay/event.service';
import { defaultProperties } from './default-properties';
let Gallery = class Gallery {
    constructor(overlay, overlayEventService) {
        this.overlay = overlay;
        this.overlayEventService = overlayEventService;
    }
    load(properties) {
        properties = this.applyPropertieDefaults(defaultProperties, properties);
        this.overlay.load({
            id: 'gallery',
            mainComponent: CarouselComponent,
            width: document.body.clientWidth + 'px',
            overlayBackdrop: true,
            position: 'fixed',
            metadata: {
                images: properties.images,
                index: properties.index,
                width: document.body.clientWidth,
                height: window.innerHeight,
                objectFit: 'none',
                margin: 0,
                transitionDuration: properties.transitionDuration,
                overflowCellsLimit: 1,
                transitionTimingFunction: properties.transitionTimingFunction,
                counter: properties.counter,
                counterSeparator: properties.counterSeparator,
                arrows: properties.arrows,
                minSwipeDistance: properties.minSwipeDistance
            }
        });
    }
    close() {
        this.overlayEventService.emitChangeEvent({
            type: 'Hide'
        });
    }
    applyPropertieDefaults(defaultProperties, properties) {
        if (!properties) {
            properties = {};
        }
        for (var propertie in properties) {
            if (properties[propertie] === undefined) {
                delete properties[propertie];
            }
        }
        this._defaultProperties = Object.assign({}, defaultProperties);
        return Object.assign(this._defaultProperties, properties);
    }
};
Gallery.ctorParameters = () => [
    { type: Overlay },
    { type: OverlayEventService }
];
Gallery = __decorate([
    Injectable()
], Gallery);
export { Gallery };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ2FsbGVyeS5zZXJ2aWNlLmpzIiwic291cmNlUm9vdCI6Im5nOi8vYW5ndWxhci1nYWxsZXJ5LyIsInNvdXJjZXMiOlsibGliL2dhbGxlcnkuc2VydmljZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUEsT0FBTyxFQUFDLFVBQVUsRUFBa0csTUFBTSxlQUFlLENBQUM7QUFFMUksT0FBTyxFQUFDLGlCQUFpQixFQUFDLE1BQU0sc0JBQXNCLENBQUM7QUFFdkQsT0FBTyxFQUFDLE9BQU8sRUFBQyxNQUFNLDJCQUEyQixDQUFDO0FBRWxELE9BQU8sRUFBQyxZQUFZLElBQUksbUJBQW1CLEVBQUMsTUFBTSx5QkFBeUIsQ0FBQztBQUM1RSxPQUFPLEVBQUMsaUJBQWlCLEVBQUMsTUFBTSxzQkFBc0IsQ0FBQztBQUd2RCxJQUFhLE9BQU8sR0FBcEIsTUFBYSxPQUFPO0lBR2hCLFlBQ1csT0FBZ0IsRUFDZixtQkFBd0M7UUFEekMsWUFBTyxHQUFQLE9BQU8sQ0FBUztRQUNmLHdCQUFtQixHQUFuQixtQkFBbUIsQ0FBcUI7SUFBRyxDQUFDO0lBRWpELElBQUksQ0FBQyxVQUE2QjtRQUNyQyxVQUFVLEdBQUcsSUFBSSxDQUFDLHNCQUFzQixDQUFDLGlCQUFpQixFQUFFLFVBQVUsQ0FBQyxDQUFDO1FBRXhFLElBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDO1lBQ2QsRUFBRSxFQUFFLFNBQVM7WUFDYixhQUFhLEVBQUUsaUJBQWlCO1lBQ2hDLEtBQUssRUFBRSxRQUFRLENBQUMsSUFBSSxDQUFDLFdBQVcsR0FBQyxJQUFJO1lBQ3JDLGVBQWUsRUFBRSxJQUFJO1lBQ3JCLFFBQVEsRUFBRSxPQUFPO1lBQ2pCLFFBQVEsRUFBRTtnQkFDTixNQUFNLEVBQUUsVUFBVSxDQUFDLE1BQU07Z0JBQ3pCLEtBQUssRUFBRSxVQUFVLENBQUMsS0FBSztnQkFDdkIsS0FBSyxFQUFFLFFBQVEsQ0FBQyxJQUFJLENBQUMsV0FBVztnQkFDaEMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxXQUFXO2dCQUMxQixTQUFTLEVBQUUsTUFBTTtnQkFDakIsTUFBTSxFQUFFLENBQUM7Z0JBQ1Qsa0JBQWtCLEVBQUUsVUFBVSxDQUFDLGtCQUFrQjtnQkFDakQsa0JBQWtCLEVBQUUsQ0FBQztnQkFDckIsd0JBQXdCLEVBQUUsVUFBVSxDQUFDLHdCQUF3QjtnQkFDN0QsT0FBTyxFQUFFLFVBQVUsQ0FBQyxPQUFPO2dCQUMzQixnQkFBZ0IsRUFBRSxVQUFVLENBQUMsZ0JBQWdCO2dCQUM3QyxNQUFNLEVBQUUsVUFBVSxDQUFDLE1BQU07Z0JBQ3pCLGdCQUFnQixFQUFFLFVBQVUsQ0FBQyxnQkFBZ0I7YUFDaEQ7U0FDSixDQUFDLENBQUM7SUFDUCxDQUFDO0lBRU0sS0FBSztRQUNSLElBQUksQ0FBQyxtQkFBbUIsQ0FBQyxlQUFlLENBQUM7WUFDckMsSUFBSSxFQUFFLE1BQU07U0FDZixDQUFDLENBQUM7SUFDUCxDQUFDO0lBRUQsc0JBQXNCLENBQUMsaUJBQWlCLEVBQUUsVUFBVTtRQUNoRCxJQUFJLENBQUMsVUFBVSxFQUFFO1lBQ2IsVUFBVSxHQUFHLEVBQUUsQ0FBQztTQUNuQjtRQUVELEtBQUssSUFBSSxTQUFTLElBQUksVUFBVSxFQUFFO1lBQzlCLElBQUksVUFBVSxDQUFDLFNBQVMsQ0FBQyxLQUFLLFNBQVMsRUFBRTtnQkFDckMsT0FBTyxVQUFVLENBQUMsU0FBUyxDQUFDLENBQUM7YUFDaEM7U0FDSjtRQUVELElBQUksQ0FBQyxrQkFBa0IsR0FBRyxNQUFNLENBQUMsTUFBTSxDQUFDLEVBQUUsRUFBRSxpQkFBaUIsQ0FBQyxDQUFDO1FBQy9ELE9BQU8sTUFBTSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsa0JBQWtCLEVBQUUsVUFBVSxDQUFDLENBQUM7SUFDOUQsQ0FBQztDQUNKLENBQUE7O1lBbER1QixPQUFPO1lBQ00sbUJBQW1COztBQUwzQyxPQUFPO0lBRG5CLFVBQVUsRUFBRTtHQUNBLE9BQU8sQ0FzRG5CO1NBdERZLE9BQU8iLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge0luamVjdGFibGUsIEluamVjdG9yLCBDb21wb25lbnRGYWN0b3J5UmVzb2x2ZXIsIEVtYmVkZGVkVmlld1JlZiwgQXBwbGljYXRpb25SZWYsIENvbXBvbmVudFJlZiwgRXZlbnRFbWl0dGVyfSBmcm9tICdAYW5ndWxhci9jb3JlJztcblxuaW1wb3J0IHtDYXJvdXNlbENvbXBvbmVudH0gZnJvbSAnLi9jYXJvdXNlbC5jb21wb25lbnQnO1xuaW1wb3J0IHtHYWxsZXJ5UHJvcGVydGllc30gZnJvbSAnLi9pbnRlcmZhY2VzJztcbmltcG9ydCB7T3ZlcmxheX0gZnJvbSAnLi9vdmVybGF5L292ZXJsYXkuc2VydmljZSc7XG5pbXBvcnQge092ZXJsYXlQcm9wZXJ0aWVzfSBmcm9tICcuL292ZXJsYXkvaW50ZXJmYWNlcyc7IFxuaW1wb3J0IHtFdmVudFNlcnZpY2UgYXMgT3ZlcmxheUV2ZW50U2VydmljZX0gZnJvbSAnLi9vdmVybGF5L2V2ZW50LnNlcnZpY2UnOyBcbmltcG9ydCB7ZGVmYXVsdFByb3BlcnRpZXN9IGZyb20gJy4vZGVmYXVsdC1wcm9wZXJ0aWVzJztcblxuQEluamVjdGFibGUoKVxuZXhwb3J0IGNsYXNzIEdhbGxlcnkge1xuICAgIF9kZWZhdWx0UHJvcGVydGllczogT3ZlcmxheVByb3BlcnRpZXM7XG5cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHVibGljIG92ZXJsYXk6IE92ZXJsYXksXG4gICAgICAgIHByaXZhdGUgb3ZlcmxheUV2ZW50U2VydmljZTogT3ZlcmxheUV2ZW50U2VydmljZSkge31cblxuICAgIHB1YmxpYyBsb2FkKHByb3BlcnRpZXM6IEdhbGxlcnlQcm9wZXJ0aWVzKSB7XG4gICAgICAgIHByb3BlcnRpZXMgPSB0aGlzLmFwcGx5UHJvcGVydGllRGVmYXVsdHMoZGVmYXVsdFByb3BlcnRpZXMsIHByb3BlcnRpZXMpO1xuXG4gICAgICAgIHRoaXMub3ZlcmxheS5sb2FkKHtcbiAgICAgICAgICAgIGlkOiAnZ2FsbGVyeScsXG4gICAgICAgICAgICBtYWluQ29tcG9uZW50OiBDYXJvdXNlbENvbXBvbmVudCxcbiAgICAgICAgICAgIHdpZHRoOiBkb2N1bWVudC5ib2R5LmNsaWVudFdpZHRoKydweCcsXG4gICAgICAgICAgICBvdmVybGF5QmFja2Ryb3A6IHRydWUsXG4gICAgICAgICAgICBwb3NpdGlvbjogJ2ZpeGVkJyxcbiAgICAgICAgICAgIG1ldGFkYXRhOiB7XG4gICAgICAgICAgICAgICAgaW1hZ2VzOiBwcm9wZXJ0aWVzLmltYWdlcyxcbiAgICAgICAgICAgICAgICBpbmRleDogcHJvcGVydGllcy5pbmRleCxcbiAgICAgICAgICAgICAgICB3aWR0aDogZG9jdW1lbnQuYm9keS5jbGllbnRXaWR0aCxcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IHdpbmRvdy5pbm5lckhlaWdodCxcbiAgICAgICAgICAgICAgICBvYmplY3RGaXQ6ICdub25lJyxcbiAgICAgICAgICAgICAgICBtYXJnaW46IDAsXG4gICAgICAgICAgICAgICAgdHJhbnNpdGlvbkR1cmF0aW9uOiBwcm9wZXJ0aWVzLnRyYW5zaXRpb25EdXJhdGlvbixcbiAgICAgICAgICAgICAgICBvdmVyZmxvd0NlbGxzTGltaXQ6IDEsXG4gICAgICAgICAgICAgICAgdHJhbnNpdGlvblRpbWluZ0Z1bmN0aW9uOiBwcm9wZXJ0aWVzLnRyYW5zaXRpb25UaW1pbmdGdW5jdGlvbixcbiAgICAgICAgICAgICAgICBjb3VudGVyOiBwcm9wZXJ0aWVzLmNvdW50ZXIsXG4gICAgICAgICAgICAgICAgY291bnRlclNlcGFyYXRvcjogcHJvcGVydGllcy5jb3VudGVyU2VwYXJhdG9yLFxuICAgICAgICAgICAgICAgIGFycm93czogcHJvcGVydGllcy5hcnJvd3MsXG4gICAgICAgICAgICAgICAgbWluU3dpcGVEaXN0YW5jZTogcHJvcGVydGllcy5taW5Td2lwZURpc3RhbmNlXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHB1YmxpYyBjbG9zZSgpIHtcbiAgICAgICAgdGhpcy5vdmVybGF5RXZlbnRTZXJ2aWNlLmVtaXRDaGFuZ2VFdmVudCh7XG4gICAgICAgICAgICB0eXBlOiAnSGlkZSdcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgYXBwbHlQcm9wZXJ0aWVEZWZhdWx0cyhkZWZhdWx0UHJvcGVydGllcywgcHJvcGVydGllcykge1xuICAgICAgICBpZiAoIXByb3BlcnRpZXMpIHtcbiAgICAgICAgICAgIHByb3BlcnRpZXMgPSB7fTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZvciAodmFyIHByb3BlcnRpZSBpbiBwcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgICBpZiAocHJvcGVydGllc1twcm9wZXJ0aWVdID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBkZWxldGUgcHJvcGVydGllc1twcm9wZXJ0aWVdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5fZGVmYXVsdFByb3BlcnRpZXMgPSBPYmplY3QuYXNzaWduKHt9LCBkZWZhdWx0UHJvcGVydGllcyk7XG4gICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKHRoaXMuX2RlZmF1bHRQcm9wZXJ0aWVzLCBwcm9wZXJ0aWVzKTtcbiAgICB9XG59Il19